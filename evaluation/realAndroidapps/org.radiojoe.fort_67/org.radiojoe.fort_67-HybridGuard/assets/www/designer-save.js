/*
 * File: designer.js
 *
 * This file was generated by Sencha Designer version 2.0.0.
 * http://www.sencha.com/products/designer/
 *
 * This file requires use of the Sencha Touch 2.0.x library, under independent license.
 * License of Sencha Designer does not include license for Sencha Touch 2.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 */


 // Wait for PhoneGap to load
 //
document.addEventListener("deviceready", onDeviceReady, false);

function backKeyDown() { 
    // do something here if you wish
    // alert('go back!');
}

 var watchID = null;

 // PhoneGap is ready
 //
 function onDeviceReady() {
	 

        document.addEventListener("resume", function(e){
            // PhoneGap setup
            var options = { frequency: 1000, enableHighAccuracy: true, maximumAge: 1 };
            watchID = navigator.geolocation.watchPosition(onGeolocationSuccess, onGeolocationError, options);
        }, false);

        document.addEventListener("pause", function(e){
            navigator.geolocation.clearWatch(watchID);    
        }, false);

	document.addEventListener("backbutton", function(e){
		navigator.app.backHistory();
	}, false);

	Ext.Loader.setConfig({
		enabled: true
	});

	Ext.application({
	models: [
        'HaversackModel'
    ],

    stores: [
        'MyJsonPStore'
    ],

    views: [
        'Image',
        'MainTabPanel',
        'Video',
        'VideoPanel',
        'HaversackNav',
        'KanakaPanel',
        'KanakaPanelContainer',
        'ApplePanel',
        'ApplePanelContainer',
        'VillageOpeningPanel',
        'VillageOpeningPanelContainer',
        'VimeoPanel',
        'KanePanel',
        'KanePanelContainer',
        'OnTheRoadMap',
        'UnderConstruction',
        'VillageCarouselContainer'
    ],
    name: 'FortVancouverMobile',
    controllers: [
        'Global'
    ],


		launch: function() {
				Ext.create('FortVancouverMobile.view.MainTabPanel', {fullscreen: true});
				document.addEventListener("backbutton", backKeyDown, true);

				GlobalObj.app = this;
				// PhoneGap setup
				var options = { frequency: 1000, enableHighAccuracy: true, maximumAge: 1 };
				watchID = navigator.geolocation.watchPosition(onGeolocationSuccess, onGeolocationError, options);
			}
		});
}
